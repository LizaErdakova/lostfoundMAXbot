План реализации (итеративно)

Итерация 1 — Добиваем MVP диалогов
Доработать FSM: сценарии транспорта, сохранение даты/времени, повторный просмотр черновика, возврат к предыдущим шагам.
Фото-шаг: предупреждения по категориям, чек-бокс подтверждения правил, обработка документов/рисковых категорий.
Расширение локации: варианты «точно», «примерно», «в пути» с подсказками по действиям (§3.2, §3.3).
Секреты: отдельно хранить вопрос/ответ, лимит символов, UI подсказки.
Публикация: вывод ближайших совпадений с кнопкой «Написать» (заготовка для чата).
Юр-комплаенс: чекбоксы и предупреждения для «Нашёл» (ст. 227 ГК РФ, уведомление о полиции/ОМСУ и 6-месячном сроке), отдельная подсказка по животным (3 дня) и запрет опасных предметов с экраном «Позвонить 112/102».

Итерация 2 — Owner-check и маскированный чат
Схема БД chats, chat_members, chat_messages.
Специальный FSM для owner-check: отправка вопросов потенциальному владельцу, подтверждение/отказ, эскалация.
Фильтрация контента (регулярки на телефоны/карты/переводы), блок слова.
Кнопка «Обменяться контактами» после подтверждения, логирование действия.
Уведомления о новых сообщениях, совпадениях (через bot).

Итерация 3 — Волонтёры и уведомления
Меню «Волонтёрить»: выбор питомца, радиуса, подписка на оповещения.
Подбор выдачи для волонтёров (карта + список).
Пуш-уведомления: сильные совпадения, новые объявления в подписке, отклики волонтёров, напоминания обновить объявление.
Реализация тихого режима (rate limit) и настроек уведомлений в боте.

Итерация 4 — MiniApp расширение
Подключить @maxhub/max-ui, max-bridge, initData авторизацию.
Страницы: «Мои объявления», «Правила/Памятка», форма отклика (ответ на секреты).
Интерактивные фильтры: радиус, период, сортировки, только животные.
Подсказки/памятки по фото прямо в UI (модалки, tooltips).
Юр-комплаенс: экраны предупреждений в MiniApp (опасные предметы, документы без ПДн, инструкции «сдать администратору/в банк/полицию»).

Итерация 5 — Фото и файловое хранилище
Интеграция S3/R2: пресайны, хранение защищённых версий, нейтральных превью.
Механизм временного кеша MAX-фото (скачать и загрузить в бакет).
Автоматическая проверка изображений (простейшие правила, интеграция с модерацией в дальнейшем).
UI чек-листы («замажьте номер», «уберите серийник»).

Итерация 6 — Модерация, пожертвования, аналитика
Кнопки «Пожаловаться», очередь жалоб, статус модератора.
Памятка и правила (раздел в боте + странице).
Кнопка «Пожертвовать» → VK Добро, логирование кликов.
Статистика: просмотры, совпадения, история чатов.
Пользовательское соглашение/правила сервиса: включить пункты о ст. 227–230 ГК РФ, обязанности нашедшего, запрете опасных предметов и ПДн.

Итерация 7 — Жизненный цикл объявлений и поддержка
Фоновый cron на напоминания (24ч, 7д, 30д) и автозакрытие спустя 3 месяца.
Возможность продлить/закрыть объявление через бота.
Бэкапы БД, мониторинг, сбор логов.
Автотесты: unit для матчинга/FSM, end-to-end сценарий бота (инмемори апдейт).
Инфраструктурные задачи параллельно
Описать public-mode (туннель/ngrok), автоматизировать (скрипт).
CI: линтеры, тесты, сборка docker-образов, выкладка клиента на Vercel.
Документация: обновить STATUS.md, README, LOCAL_SETUP.md с режимами запуска, ключами, чек-листом тестирования.
Такой план закроет основные требования из Бот.md, а также подготовит проект к демонстрации и публикации.